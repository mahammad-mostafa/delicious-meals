(()=>{"use strict";var e={424:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),i=s(645),r=s.n(i)()(o());r.push([e.id,"* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  padding: 10px;\n}\n\nul {\n  display: flex;\n  gap: 20px;\n  list-style: none;\n}\n\n@media only screen and (min-width: 768px) {\n  body {\n    max-width: 1000px;\n    margin: auto;\n  }\n}\n",""]);const a=r},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var a=0;a<this.length;a++){var p=this[a][0];null!=p&&(r[p]=!0)}for(var m=0;m<e.length;m++){var u=[].concat(e[m]);n&&r[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),s&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=s):u[2]=s),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var i={},r=[],a=0;a<e.length;a++){var p=e[a],m=n.base?p[0]+n.base:p[0],u=i[m]||0,d="".concat(m," ").concat(u);i[m]=u+1;var l=s(d),c={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(-1!==l)t[l].references++,t[l].updater(c);else{var h=o(c,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:h,references:1})}r.push(d)}return r}function o(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<i.length;r++){var a=s(i[r]);t[a].references--}for(var p=n(e,o),m=0;m<i.length;m++){var u=s(i[m]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=p}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var o=void 0!==s.layer;o&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,o&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var i=s.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{const e=class{constructor(){this.popup=document.getElementById("popup"),this.popupBlock=document.getElementById("popup-block"),this.popupClose=document.getElementById("popup-close"),this.popupImage=document.getElementById("popup-image"),this.popupTitle=document.getElementById("popup-title"),this.popupDescription=document.getElementById("popup-description"),this.popupListTitle=document.getElementById("popup-list-title"),this.popupList=document.getElementById("popup-list"),this.popupFormTitle=document.getElementById("popup-form-title"),this.popupFormComment=document.getElementById("popup-form-comment"),this.popupFormReservation=document.getElementById("popup-form-reservation")}};class t{constructor(e,t,s,n,o){this.network=e,this.itemId=t,this.username=s,this.dateStart=n,this.dateEnd=o}postReservationMethod=()=>{this.network.postReservation(this)}}class n{constructor(e,t,s,n){this.network=e,this.itemId=t,this.username=s,this.comment=n}postCommentMethod=()=>{this.network.postComment(this)}}class o{constructor(t,s){this.renderPopup(s,t),this.dom=new e,this.formManagement=new class{constructor(){this.dom=new e}clearFormFields=e=>{if(""!==e)if("COMMENT"===e)this.dom.popupFormComment[0].reset();else{if("RESERVATION"!==e)throw new Error("Invalid target type name");this.dom.popupFormReservation[0].reset()}};checkFilledForm=e=>{const t=document.forms[e].querySelectorAll(".form-field");let s=!0;return t.forEach(element,(()=>{""===element.value&&(s=!1)})),s};manageFormVisibility(e){"COMMENT"===e?(this.dom.popupFormComment.classList.add("visible"),this.dom.popupFormReservation.classList.remove("visible")):(this.dom.popupFormReservation.classList.add("visible"),this.dom.popupFormComment.classList.remove("visible"))}}}renderDetails(e,t){this.dom.popupImage.src=e.itemDetails.strMealThumb,this.dom.popupTitle.textContent=e.itemDetails.strMeal,this.dom.popupDescription.textContent=e.itemDetails.strInstructions,this.dom.popupListTitle.textContent="COMMENT"===t?"Comments":"Reservations",this.dom.popupFormTitle.textContent="COMMENT"===t?"Add Comment":"Add Reservation"}renderInvolvement(e,t){let s="";this.dom.popupList.textContent="","COMMENT"===t?e.involvementList.forEach((e=>{s+=`<li>${e.creation_date} ${e.username}: ${e.comment}</li>`})):e.involvementList.forEach((e=>{s+=`<li>${e.date_start} - ${e.date_end} by ${e.username}</li>`})),this.dom.popupList.textContent=s}renderPopup(e={},s){if(!e||""===s)throw new Error("Invalid data type");if(this.dom.popup.classList.toggle("active"),"COMMENT"!==s&&"RESERVATION"!==s)throw new Error("Invalid target type name");this.renderDetails(e,s),this.renderInvolvement(e,s),this.formManagement.manageFormVisibility(s),"COMMENT"===s?this.dom.popupFormComment.addEventListener("submit",(e=>{if(e.preventDefault(),!this.formManagement.checkFilledForm("popup-form-comment"))throw new Error("Invalid reservation Post");new n(this.network,itemId,this.dom.popupFormReservation.elements.username.value,this.dom.popupFormReservation.elements.comment.value).postComment()})):this.dom.popupFormReservation.addEventListener("submit",(e=>{if(e.preventDefault(),!this.formManagement.checkFilledForm("popup-form-reservation"))throw new Error("Invalid reservation post request");new t(this.network,itemId,this.dom.popupFormReservation.elements.username.value,this.dom.popupFormReservation.elements.date_start.value,this.dom.popupFormReservation.elements.date_end.value).postReservationMethod()})),this.dom.popupClose.addEventListener("click",(()=>{this.clearPopup(s),this.formManagement.clearFormFields(s)}))}clearPopup=e=>{""!==e&&(this.dom.popupImage.src="",this.dom.popupTitle.textContent="",this.dom.popupListTitle.textContent="",this.dom.popupDescription.textContent="",this.dom.popupList.textContent="",this.dom.popupFormTitle.textContent="",this.dom.popup.classList.toggle("active"))}}var i=s(379),r=s.n(i),a=s(795),p=s.n(a),m=s(569),u=s.n(m),d=s(565),l=s.n(d),c=s(216),h=s.n(c),v=s(589),f=s.n(v),g=s(424),y={};y.styleTagTransform=f(),y.setAttributes=l(),y.insert=u().bind(null,"head"),y.domAPI=p(),y.insertStyleElement=h(),r()(g.Z,y),g.Z&&g.Z.locals&&g.Z.locals;const b=document.querySelector("#menu"),C=document.querySelector("#list-block"),R=new class{constructor(e,t){this.meals="https://themealdb.com/api/json/v1/1/",this.involvement="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/",this.appId="7f1BuLlilpO9a0A6DJ97",this.list=new class{constructor(e,t){this.menu=e,this.list=t,this.categories=["seafood","pasta","vegan"],this.buildMenu()}buildMenu=()=>{const e=new DocumentFragment;this.categories.forEach((t=>{const s=document.createElement("a");s.href=`#${t}`,s.textContent=t,e.appendChild(s)})),this.menu.appendChild(e)};displayList=({category:e,listItems:t,totalLikes:s})=>{this.likes=s;const n=new DocumentFragment;t.forEach((e=>{const t=document.createElement("li");t.id=`item${e.idMeal}`;let s=`<img src="${e.strMealThumb}" alt="${e.strMeal}" />`;s+=`<h2>${e.strMeal}</h2>`,s+=`<span>${this.countLikes(e.idMeal)} likes</span>`,s+='<button id="likes" type="button">likes</button>',s+='<button id="comments" type="button">comments</button>',s+='<button id="reservations" type="button">reservations</button>',t.innerHTML=s,n.appendChild(t)})),this.list.innerHTML="",this.list.appendChild(n),this.displayCounter(e,this.list.childElementCount)};displayCounter=(e,t)=>{this.categories.forEach(((s,n)=>{this.menu.children[n].hash===`#${e}`?this.menu.children[n].textContent=`${s} (${t})`:this.menu.children[n].textContent=`${s}`}))};countLikes=e=>{if(0===this.likes.length)return 0;const t=this.likes.find((t=>t.item_id===e));return void 0===t?0:t.likes};updateLikes=e=>{document.querySelector(`#item${e} span`).textContent=`${this.countLikes(e)+1} likes`}}(e,t),this.popup=new o}buildHeaders=(e,t)=>({method:e,body:JSON.stringify(t),headers:{"content-type":"application/json"}});buildRequest=async(e,t={})=>{const s=await fetch(e,t),n=await s.text();return n.length>0&&0===Object.keys(t).length?JSON.parse(n):n};sendRequest=async(e,t,s=null)=>{const n=await Promise.all(t);this.handleResponse(e,n,s)};handleResponse=(e,t,s)=>{switch(e){case"getList":this.list.displayList({category:s,listItems:t[0].meals,totalLikes:t[1]});break;case"postLike":this.list.updateLikes(s);break;case"getComments":this.popup.renderPopup({popupType:"comments",itemDetails:t[0],involvementList:t[1]});break;case"postComment":this.updateComments(s);break;case"updateComments":this.popup.renderInvolvement({popupType:"comments",involvementList:t[0]});break;case"getReservations":this.popup.renderPopup({popupType:"reservations",itemDetails:t[0],involvementList:t[1]});break;case"postReservation":this.updateReservations(s);break;case"updateReservation":this.popup.renderInvolvement({popupType:"reservations",involvementList:t[0]})}};promiseItem=e=>this.buildRequest(`${this.meals}lookup.php?i=${e}`);getList=e=>{const t=[];t.push(this.buildRequest(`${this.meals}filter.php?c=${e}`)),t.push(this.buildRequest(`${this.involvement}${this.appId}/likes`)),this.sendRequest("getList",t,e)};postLike=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/likes`,this.buildHeaders("post",{item_id:e}));this.sendRequest("postLike",[t],e)};getComments=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/comments?item_id=${e}`);this.sendRequest("getComments",[this.promiseItem(e),t])};postComment=({itemId:e,username:t,comment:s})=>{const n=this.buildRequest(`${this.involvement}${this.appId}/comments`,this.buildHeaders("post",{item_id:e,username:t,comment:s}));this.sendRequest("postComment",[n],e)};updateComments=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/comments?item_id=${e}`);this.sendRequest("updateComments",[t])};getReservations=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/reservations?item_id=${e}`);this.sendRequest("getReservations",[this.promiseItem(e),t])};postReservation=({itemId:e,username:t,comment:s})=>{const n=this.buildRequest(`${this.involvement}${this.appId}/reservations`,this.buildHeaders("post",{item_id:e,username:t,comment:s}));this.sendRequest("postReservation",[n],e)};updateReservations=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/reservations?item_id=${e}`);this.sendRequest("updateReservations",[t],e)};openPopup=(e,t)=>{"comments"===e?this.getComments(t):"reservations"===e&&this.getReservations(t)}}(b,C);b.addEventListener("click",(e=>{e.preventDefault(),void 0!==e.target.hash&&["#seafood","#pasta","#vegan"].includes(e.target.hash)&&R.getList(e.target.hash.replace("#",""))})),C.addEventListener("click",(e=>{if(void 0!==e.target.id&&["likes","comments","reservations"].includes(e.target.id)){const t=e.target.parentNode.id.replace("item","");"likes"===e.target.id?R.postLike(t):R.openPopup(e.target.id,t)}})),R.getList("seafood")})()})();