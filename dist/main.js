(()=>{"use strict";var e={424:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),i=s.n(n),o=s(645),r=s.n(o)()(i());r.push([e.id,"* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  padding: 10px;\n}\n\nul {\n  display: flex;\n  gap: 20px;\n  list-style: none;\n}\n\n@media only screen and (min-width: 768px) {\n  body {\n    max-width: 1000px;\n    margin: auto;\n  }\n}\n",""]);const a=r},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var a=0;a<this.length;a++){var p=this[a][0];null!=p&&(r[p]=!0)}for(var m=0;m<e.length;m++){var d=[].concat(e[m]);n&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var o={},r=[],a=0;a<e.length;a++){var p=e[a],m=n.base?p[0]+n.base:p[0],d=o[m]||0,u="".concat(m," ").concat(d);o[m]=d+1;var l=s(u),c={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(-1!==l)t[l].references++,t[l].updater(c);else{var h=i(c,n);n.byIndex=a,t.splice(a,0,{identifier:u,updater:h,references:1})}r.push(u)}return r}function i(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,i){var o=n(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var a=s(o[r]);t[a].references--}for(var p=n(e,i),m=0;m<o.length;m++){var d=s(o[m]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=p}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var i=void 0!==s.layer;i&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,i&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{const e=class{constructor(){this.popup=document.getElementById("popup"),this.popupBlock=document.getElementById("popup-block"),this.popupClose=document.getElementById("popup-close"),this.popupImage=document.getElementById("popup-image"),this.popupTitle=document.getElementById("popup-title"),this.popupDescription=document.getElementById("popup-description"),this.popupListTitle=document.getElementById("popup-list-title"),this.popupList=document.getElementById("popup-list"),this.popupFormTitle=document.getElementById("popup-form-title"),this.popupFormComment=document.getElementById("popup-form-comment"),this.popupFormReservation=document.getElementById("popup-form-reservation")}},t=class{constructor(){this.dom=new e}clearPopup=e=>{if(""!==e)if(this.dom.popupImage.src="",this.dom.popupTitle.textContent="",this.dom.popupListTitle.textContent="",this.dom.popupDescription.textContent="",this.dom.popupList.textContent="",this.dom.popupFormTitle.textContent="",this.dom.popup.classList.toggle("active"),"COMMENT"===e)this.dom.popupFormComment[0].reset();else{if("RESERVATION"!==e)throw new Error("Invalid target type name");this.dom.popupFormReservation[0].reset()}};checkFilledForm=e=>{const t=document.forms[e].querySelectorAll(".form-field");let s=!0;return t.forEach(element,(()=>{""===element.value&&(s=!1)})),s}},n=class{constructor(){this.formManagement=new t,this.dom=new e,this.network=new o}postReservationMethod=()=>{if(!this.formManagement.checkFilledForm("popup-form-reservation"))throw new Error("Invalid reservation Post");{const e={item_id:data.itemDetails.item_id,username:this.dom.popupFormReservation.elements.username.value,date_start:this.dom.popupFormReservation.elements.date_start.value,date_end:this.dom.popupFormReservation.elements.date_end.value};this.network.postReservation(e.item_id,e.username,e.date_start,e.date_end)}}};class i{constructor(s,i){this.renderPopup(i,s),this.dom=new e,this.formManagement=new t,this.reservations=new n}renderDetails(e,t){this.dom.popupImage.src=e.itemDetails.strMealThumb,this.dom.popupTitle.textContent=e.itemDetails.strMeal,this.dom.popupDescription.textContent=e.itemDetails.strInstructions,this.dom.popupListTitle.textContent="COMMENT"===t?"Comments":"Reservations",this.dom.popupFormTitle.textContent="COMMENT"===t?"Add Comment":"Add Reservation"}renderInvolvement(e,t){let s="";this.dom.popupList.textContent="","COMMENT"===t?e.involvementList.forEach((e=>{s+=`<li>${e.creation_date} ${e.username}: ${e.comment}</li>`})):e.involvementList.forEach((e=>{s+=`<li>${e.date_start} - ${e.date_end} by ${e.username}</li>`})),this.dom.popupList.textContent=s}manageFormVisibility(e){"COMMENT"===e?(this.dom.popupFormComment.classList.add("visible"),this.dom.popupFormReservation.classList.remove("visible")):(this.dom.popupFormReservation.classList.add("visible"),this.dom.popupFormComment.classList.remove("visible"))}renderPopup(e={},t){if(!e||""===t)throw new Error("Invalid data type");if(this.dom.popup.classList.toggle("active"),"COMMENT"!==t&&"RESERVATION"!==t)throw new Error("Invalid target type name");this.renderDetails(e,t),this.renderInvolvement(e,t),this.manageFormVisibility(t),"COMMENT"===t?this.dom.popupFormComment.addEventListener("submit",(t=>{t.preventDefault(),this.checkFilledForm("popup-form-comment")&&(e.itemDetails.item_id,this.dom.popupFormComment.elements.username.value,this.dom.popupFormComment.elements.comment.value)})):this.dom.popupFormReservation.addEventListener("submit",(e=>{e.preventDefault(),this.reservations.postReservationMethod()})),this.dom.popupClose.addEventListener("click",(()=>{this.formManagement.clearPopup(t)}))}}const o=class{constructor(e,t){this.meals="https://themealdb.com/api/json/v1/1/",this.involvement="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/",this.appId="7f1BuLlilpO9a0A6DJ97",this.list=new class{constructor(e,t){this.menu=e,this.list=t,this.categories=["seafood","pasta","vegan"],this.buildMenu()}buildMenu=()=>{const e=new DocumentFragment;this.categories.forEach((t=>{const s=document.createElement("a");s.href=`#${t}`,s.textContent=t,e.appendChild(s)})),this.menu.appendChild(e)};displayList=({category:e,listItems:t,totalLikes:s})=>{this.likes=s;const n=new DocumentFragment;t.forEach((e=>{const t=document.createElement("li");t.id=`item${e.idMeal}`;let s=`<img src="${e.strMealThumb}" alt="${e.strMeal}" />`;s+=`<h2>${e.strMeal}</h2>`,s+=`<span>${this.countLikes(e.idMeal)} likes</span>`,s+='<button id="likes" type="button">likes</button>',s+='<button id="comments" type="button">comments</button>',s+='<button id="reservations" type="button">reservations</button>',t.innerHTML=s,n.appendChild(t)})),this.list.innerHTML="",this.list.appendChild(n),this.displayCounter(e,this.list.childElementCount)};displayCounter=(e,t)=>{this.categories.forEach(((s,n)=>{this.menu.children[n].hash===`#${e}`?this.menu.children[n].textContent=`${s} (${t})`:this.menu.children[n].textContent=`${s}`}))};countLikes=e=>{if(0===this.likes.length)return 0;const t=this.likes.find((t=>t.item_id===e));return void 0===t?0:t.likes};updateLikes=e=>{document.querySelector(`#item${e} span`).textContent=`${this.countLikes(e)+1} likes`}}(e,t),this.popup=new i}buildHeaders=(e,t)=>({method:e,body:JSON.stringify(t),headers:{"content-type":"application/json"}});buildRequest=async(e,t={})=>{const s=await fetch(e,t),n=await s.text();return n.length>0&&0===Object.keys(t).length?JSON.parse(n):n};sendRequest=async(e,t,s=null)=>{const n=await Promise.all(t);this.handleResponse(e,n,s)};handleResponse=(e,t,s)=>{switch(e){case"getList":this.list.displayList({category:s,listItems:t[0].meals,totalLikes:t[1]});break;case"postLike":this.list.updateLikes(s);break;case"getComments":this.popup.renderPopup({popupType:"comments",itemDetails:t[0],involvementList:t[1]});break;case"postComment":this.updateComments(s);break;case"updateComments":this.popup.renderInvolvement({popupType:"comments",involvementList:t[0]});break;case"getReservations":this.popup.renderPopup({popupType:"reservations",itemDetails:t[0],involvementList:t[1]});break;case"postReservation":this.updateReservations(s);break;case"updateReservation":this.popup.renderInvolvement({popupType:"reservations",involvementList:t[0]})}};promiseItem=e=>this.buildRequest(`${this.meals}lookup.php?i=${e}`);getList=e=>{const t=[];t.push(this.buildRequest(`${this.meals}filter.php?c=${e}`)),t.push(this.buildRequest(`${this.involvement}${this.appId}/likes`)),this.sendRequest("getList",t,e)};postLike=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/likes`,this.buildHeaders("post",{item_id:e}));this.sendRequest("postLike",[t],e)};getComments=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/comments?item_id=${e}`);this.sendRequest("getComments",[this.promiseItem(e),t])};postComment=({itemId:e,username:t,comment:s})=>{const n=this.buildRequest(`${this.involvement}${this.appId}/comments`,this.buildHeaders("post",{item_id:e,username:t,comment:s}));this.sendRequest("postComment",[n],e)};updateComments=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/comments?item_id=${e}`);this.sendRequest("updateComments",[t])};getReservations=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/reservations?item_id=${e}`);this.sendRequest("getReservations",[this.promiseItem(e),t])};postReservation=({itemId:e,username:t,comment:s})=>{const n=this.buildRequest(`${this.involvement}${this.appId}/reservations`,this.buildHeaders("post",{item_id:e,username:t,comment:s}));this.sendRequest("postReservation",[n],e)};updateReservations=e=>{const t=this.buildRequest(`${this.involvement}${this.appId}/reservations?item_id=${e}`);this.sendRequest("updateReservations",[t],e)};openPopup=(e,t)=>{"comments"===e?this.getComments(t):"reservations"===e&&this.getReservations(t)}};var r=s(379),a=s.n(r),p=s(795),m=s.n(p),d=s(569),u=s.n(d),l=s(565),c=s.n(l),h=s(216),v=s.n(h),f=s(589),g=s.n(f),y=s(424),b={};b.styleTagTransform=g(),b.setAttributes=c(),b.insert=u().bind(null,"head"),b.domAPI=m(),b.insertStyleElement=v(),a()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;const C=document.querySelector("#menu"),R=document.querySelector("#list-block"),L=new o(C,R);C.addEventListener("click",(e=>{e.preventDefault(),void 0!==e.target.hash&&["#seafood","#pasta","#vegan"].includes(e.target.hash)&&L.getList(e.target.hash.replace("#",""))})),R.addEventListener("click",(e=>{if(void 0!==e.target.id&&["likes","comments","reservations"].includes(e.target.id)){const t=e.target.parentNode.id.replace("item","");"likes"===e.target.id?L.postLike(t):L.openPopup(e.target.id,t)}})),L.getList("seafood")})()})();